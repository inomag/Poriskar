<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Days+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/routes.css">
    <title>Hello, world!</title>
</head>

<body>

    <!-- NAVBAR -->

    <div class="navbar">
        <p id="logo">PORISKAR</p>
        <div class="navbar-right">
            <ul>
                <li><a id="home_link" href="/">Home</a></li>
                <li><a href="/drivers">Drivers</a></li>
                <li><a href="/routes">Routes</a></li>

                <% if(user) { %>
                    <li><a id="login_link" href="/logout">Log out</a></li>
                    <% } else { %>
                        <li><a id="login_link" href="/login">Log in</a></li>
                        <% } %>

            </ul>
        </div>
    </div>


    <!-- LIST -->

    <input type="text" id="lat" na>

    <div class="routesList">
        <% routes.forEach(route => {  %>
            <% if(route.id != 0) { %>
                <p class="text-info routesListItem rectangle">
                    <strong> Name: 
                <%= route.name %>
            </strong>
                    <br> ID:
                    <%= route.id %>
                        <% } %>
                            <% }); %>
    </div>


    <div id="map"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
</body>

<script>
    const lat = document.getElementById('lat').value;
    const lng = document.getElementById('lng').value;

    function initMap() {
        const geocoder = new google.maps.Geocoder();
        geocodeLatLng(geocoder, 26.4169232, 91.062411);
    }

    const geocodeLatLng = (geocoder, lat, lng) => {
        const latlng = {
            lat,
            lng
        };
        geocoder.geocode({
            location: latlng
        }, (results, status) => {
            if (status === "OK") {
                if (results) {
                    console.log(results);
                    document.getElementById('map').innerHTML = `<h2>Address: ${results[1].formatted_address} </h2>`;
                    return results;
                } else {
                    window.alert("No results found");
                }
            } else {
                window.alert("Geocoder failed due to: " + status);
            }
        });
    }
</script>

</html>